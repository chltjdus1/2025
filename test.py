# ----------------------------
# 1. í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°
# ----------------------------
import streamlit as st   # ì›¹ì•± ì œì‘ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬
import random            # ë¦¬ìŠ¤íŠ¸ì—ì„œ ë¬´ì‘ìœ„ ì„ íƒìš©

# ----------------------------
# 2. í™•ì¥ëœ í•œêµ­ì–´ ê°ì • ë¶„ì„ í•¨ìˆ˜ ì •ì˜
# ----------------------------
def extended_sentiment_analysis(text):
    """
    ì‚¬ìš©ìì˜ ë¬¸ì¥ì„ ë¶„ì„í•˜ì—¬ ê°ì •ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
    - ê¸ì •: í–‰ë³µ, ì¦ê±°ì›€, ì„¤ë ˜, ë§Œì¡±, ì‹ ë‚¨
    - ë¶€ì •: ìŠ¬í””, ìš°ìš¸, ì™¸ë¡œì›€, ì§œì¦, í”¼ê³¤, ê¸´ì¥
    - ì¤‘ë¦½: ë³´í†µ, í‰ì˜¨, ë¬´ë‚œ
    """
    text = text.lower()  # ì†Œë¬¸ìë¡œ ë³€í™˜í•˜ì—¬ í‚¤ì›Œë“œ ë¹„êµ

    # ê¸ì • í‚¤ì›Œë“œ ëª©ë¡
    positive_keywords = ["ì¢‹ì•„", "í–‰ë³µ", "ì¦ê±°", "ì‹ ë‚˜", "ê¸°ì¨", "ë§Œì¡±", "ì„¤ë ˜", "í–‰ë³µí•´", "ì‹ ë‚œ", "ì¢‹ì€"]
    # ë¶€ì • í‚¤ì›Œë“œ ëª©ë¡
    negative_keywords = ["ìŠ¬í¼", "ìš°ìš¸", "ì§œì¦", "í™”ë‚˜", "ì‹«ì–´", "í˜ë“¤", "í”¼ê³¤", "ì™¸ë¡œì›€", "ê¸´ì¥", "ë¶ˆì•ˆ"]
    # ì¤‘ë¦½ í‚¤ì›Œë“œ ëª©ë¡
    neutral_keywords = ["ë³´í†µ", "ë¬´ë‚œ", "í‰ì˜¨", "ê·¸ëƒ¥"]

    # í‚¤ì›Œë“œ ë§¤ì¹­í•˜ì—¬ ê°ì • ë°˜í™˜
    if any(word in text for word in positive_keywords):
        return "ê¸ì •"
    elif any(word in text for word in negative_keywords):
        return "ë¶€ì •"
    else:
        return "ì¤‘ë¦½"

# ----------------------------
# 3. ê°ì •ë³„ ìŒì‹ ì¶”ì²œ ë°ì´í„° (10ê°œ ì´ìƒ)
# ----------------------------
mood_foods = {
    "ê¸ì •": [
        {"ìŒì‹": "íŒŒìŠ¤íƒ€", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/12/09/08/18/spaghetti-3001311_1280.jpg"},
        {"ìŒì‹": "ì´ˆë°¥", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/05/07/08/56/sushi-2297689_1280.jpg"},
        {"ìŒì‹": "ë”¸ê¸° íŒŒë¥´í˜", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2016/11/21/15/46/strawberry-1846080_1280.jpg"},
        {"ìŒì‹": "ìƒëŸ¬ë“œ", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2016/03/05/19/02/salad-1238249_1280.jpg"},
        {"ìŒì‹": "ì¹˜í‚¨", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/12/09/08/18/chicken-3001313_1280.jpg"},
        {"ìŒì‹": "íŒ¬ì¼€ì´í¬", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/05/07/08/56/pancake-2297687_1280.jpg"},
        {"ìŒì‹": "ì•„ì´ìŠ¤í¬ë¦¼", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2014/12/16/22/25/ice-cream-570802_1280.jpg"},
        {"ìŒì‹": "ìŠ¤ë¬´ë””", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/03/30/12/30/smoothie-2189736_1280.jpg"},
        {"ìŒì‹": "ì™€í”Œ", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2018/03/16/20/28/waffles-3231974_1280.jpg"},
        {"ìŒì‹": "ë§ˆì¹´ë¡±", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2018/06/21/21/28/macarons-3482312_1280.jpg"}
    ],
    "ì¤‘ë¦½": [
        {"ìŒì‹": "ì¹˜ì¦ˆ í”¼ì", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/12/09/08/18/pizza-3007395_1280.jpg"},
        {"ìŒì‹": "ìƒŒë“œìœ„ì¹˜", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2014/10/23/18/05/burger-500054_1280.jpg"},
        {"ìŒì‹": "íƒ€ì½”", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/01/22/19/20/taco-2003468_1280.jpg"},
        {"ìŒì‹": "ë³¶ìŒë°¥", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2015/04/08/13/13/fried-rice-712665_1280.jpg"},
        {"ìŒì‹": "ê³„ë€ë§ì´", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2018/05/07/12/24/egg-3387256_1280.jpg"},
        {"ìŒì‹": "ìš°ë™", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/07/16/11/53/ramen-2509888_1280.jpg"},
        {"ìŒì‹": "ê¹€ë°¥", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2016/06/17/06/53/kimbap-1462173_1280.jpg"},
        {"ìŒì‹": "ìƒëŸ¬ë¦¬ ìŠ¤í‹±", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2016/03/05/19/02/salad-1238249_1280.jpg"},
        {"ìŒì‹": "ì¹˜ì¦ˆ í† ìŠ¤íŠ¸", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/02/14/20/40/toast-2063034_1280.jpg"},
        {"ìŒì‹": "ì»µì¼€ì´í¬", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2016/03/05/19/02/cupcake-1238248_1280.jpg"}
    ],
    "ë¶€ì •": [
        {"ìŒì‹": "ì´ˆì½œë¦¿ ì¼€ì´í¬", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/01/26/02/06/chocolate-cake-2010993_1280.jpg"},
        {"ìŒì‹": "ë¼ë©˜", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/07/16/11/53/ramen-2509888_1280.jpg"},
        {"ìŒì‹": "ì‚¼ê³„íƒ•", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2020/06/22/08/56/chicken-soup-5327328_1280.jpg"},
        {"ìŒì‹": "ì£½", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2018/03/11/19/37/congee-3211216_1280.jpg"},
        {"ìŒì‹": "ë–¡ë³¶ì´", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/12/09/08/18/tteokbokki-3001314_1280.jpg"},
        {"ìŒì‹": "ì¹´ë ˆ", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2016/03/05/19/02/curry-1238252_1280.jpg"},
        {"ìŒì‹": "ìŠ¤í”„", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/05/07/08/56/soup-2297684_1280.jpg"},
        {"ìŒì‹": "ê¹€ì¹˜ì°Œê°œ", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2015/12/05/23/23/kimchi-1079815_1280.jpg"},
        {"ìŒì‹": "ë¼ìëƒ", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/01/13/14/29/lasagna-1975074_1280.jpg"},
        {"ìŒì‹": "ë¹„ë¹”ë°¥", "ì´ë¯¸ì§€": "https://cdn.pixabay.com/photo/2017/06/03/11/52/korean-2378728_1280.jpg"}
    ]
}

# ----------------------------
# 4. Streamlit í™”ë©´ êµ¬ì„±
# ----------------------------
# í˜ì´ì§€ ì„¤ì • (ì•„ì´ì½˜ ì œê±°)
st.set_page_config(page_title="ê³ ê¸‰ ëœë¤ ìŒì‹ ì¶”ì²œ", layout="centered")  
# - page_title: ë¸Œë¼ìš°ì € íƒ­ ì œëª©  
# - layout="centered": í™”ë©´ ì¤‘ì•™ ë°°ì¹˜  

# ì•± ì œëª©ê³¼ ì„¤ëª…
st.title("ğŸ½ï¸ ê¸°ë¶„ â†’ ê°ì • ë¶„ì„ â†’ ëœë¤ ìŒì‹ ì¶”ì²œ (ê³ ê¸‰)")
st.write("ğŸ‘‰ ë‹¤ì–‘í•œ ê¸°ë¶„ í‚¤ì›Œë“œë¡œ ê°ì •ì„ ë¶„ì„í•˜ê³ , ì–´ìš¸ë¦¬ëŠ” ìŒì‹ì„ ëœë¤ìœ¼ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤!")

# ì‚¬ìš©ìë¡œë¶€í„° ê¸°ë¶„ ì…ë ¥ ë°›ê¸°
user_input = st.text_input("ì§€ê¸ˆ ê¸°ë¶„ì„ ììœ ë¡­ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: 'ì˜¤ëŠ˜ ë„ˆë¬´ ìš°ìš¸í•´ìš”')")

# ì‚¬ìš©ìê°€ ì…ë ¥í•˜ë©´ ì‹¤í–‰
if user_input:
    mood = extended_sentiment_analysis(user_input)       # 1) ê°ì • ë¶„ì„
    food_info = random.choice(mood_foods[mood])         # 2) í•´ë‹¹ ê°ì • ìŒì‹ ì¤‘ ëœë¤ ì„ íƒ

    # ë¶„ì„ ê²°ê³¼ ì¶œë ¥
    st.success(f"**ë¶„ì„ ê²°ê³¼:** {mood}")                # ê°ì • ê²°ê³¼ í‘œì‹œ

    # ìŒì‹ ì¹´ë“œ í˜•íƒœë¡œ ì´ë¦„ê³¼ ì´ë¯¸ì§€ ì¶œë ¥
    st.markdown(f"""
    <div style="background-color:#f8f9fa; padding:20px; border-radius:15px; 
                box-shadow:2px 2px 10px rgba(0,0,0,0.1); text-align:center;">
        <h2>{food_info['ìŒì‹']}</h2>
        <img src="{food_info['ì´ë¯¸ì§€']}" width="300" style="border-radius:10px; margin:10px 0;">
        <p><b>ì¶”ì²œ ì´ìœ :</b> {mood} ê°ì •ì— ë§ëŠ” ìŒì‹</p>
    </div>
    """, unsafe_allow_html=True)  # HTML ì¹´ë“œ ì¶œë ¥
